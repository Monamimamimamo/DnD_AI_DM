# üìã Changelog - –ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏–∑ –¥–∏–∞–ª–æ–≥–∞ —Å ChatGPT.

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **Rule Engine** (`src/game_rules/rule_engine.py`)
   - –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –ø—Ä–∞–≤–∏–ª D&D 5e
   - –†–∞—Å—á–µ—Ç DC (Difficulty Class) –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
   - –ú–∞–ø–ø–∏–Ω–≥ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –Ω–∞–≤—ã–∫–∏ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–±—Ä–æ–Ω—è, –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
   - –ë–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è LLM - —á–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞

2. **Action Parser** (`src/game_rules/action_parser.py`)
   - LLM-—Å–ª–æ–π –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏–≥—Ä–æ–∫–∞
   - –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–∫—Å—Ç –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç intent, –Ω–∞–≤—ã–∫–∏, —Å–ª–æ–∂–Ω–æ—Å—Ç—å, —Ñ–∞–∫—Ç–æ—Ä—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∏–∑–∫—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É (0.3) –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

3. **Dice Roller** (`src/game_rules/dice.py`)
   - –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –±—Ä–æ—Å–∫–æ–≤ –∫—É–±–∏–∫–æ–≤
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–π: `1d20+3`, `2d6`, `4d8+1`
   - –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫

4. **Game Orchestrator** (`src/ai_engine/orchestrator.py`)
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –ü–æ—Ç–æ–∫: Action Parser ‚Üí Rule Engine ‚Üí DM Agent
   - –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –µ–¥–∏–Ω—ã–π –æ—Ç–≤–µ—Ç

5. **–û–±–Ω–æ–≤–ª–µ–Ω DungeonMasterAI** (`src/ai_engine/dungeon_master.py`)
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Orchestrator
   - Fallback –Ω–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### üìÅ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ game_rules/          # –ù–æ–≤—ã–π –º–æ–¥—É–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ rule_engine.py
‚îÇ   ‚îú‚îÄ‚îÄ action_parser.py
‚îÇ   ‚îî‚îÄ‚îÄ dice.py
‚îú‚îÄ‚îÄ ai_engine/
‚îÇ   ‚îú‚îÄ‚îÄ orchestrator.py  # –ù–æ–≤—ã–π —Ñ–∞–π–ª
‚îÇ   ‚îî‚îÄ‚îÄ dungeon_master.py  # –û–±–Ω–æ–≤–ª–µ–Ω
‚îî‚îÄ‚îÄ ...
```

### üîÑ –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥:**
```
–ò–≥—Ä–æ–∫ ‚Üí LLM ‚Üí –û—Ç–≤–µ—Ç DM
```

**–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥:**
```
–ò–≥—Ä–æ–∫ ‚Üí Action Parser (LLM) ‚Üí Rule Engine (–¥–µ—Ç–µ—Ä–º.) ‚Üí DM Agent (LLM) ‚Üí –û—Ç–≤–µ—Ç
```

### üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø—Ä–∞–≤–∏–ª**: Rule Engine –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∫–∏ D&D 5e
2. **–ì–∏–±–∫–æ—Å—Ç—å**: Action Parser –ø–æ–Ω–∏–º–∞–µ—Ç –ª—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–∞
3. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –∑–∞–¥–∞—á—É
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `ARCHITECTURE.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –û–±–Ω–æ–≤–ª–µ–Ω `README.md` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### ‚ö†Ô∏è –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- –ï—Å–ª–∏ Orchestrator –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –Ω–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

### üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **SRD Integration**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Open5e API –∏–ª–∏ 5e-bits
2. **Lore Agent (RAG)**: ChromaDB –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞–Ω–∏–π –æ –º–∏—Ä–µ
3. **NPC Agents**: –û—Ç–¥–µ–ª—å–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö NPC
4. **Combat System**: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–æ—è

